# üêõ –ù–ê–ô–î–ï–ù–ù–´–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤–æ–π –±–∞–∑—ã –≤—ã—è–≤–∏–ª–∞:

### ‚ùå –û—à–∏–±–∫–∞ #1: –°—Å—ã–ª–∫–∞ –Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é

**–§–∞–π–ª:** `gunicorn.conf.py`, —Å—Ç—Ä–æ–∫–∞ 73

**–ë—ã–ª–æ:**
```python
# –°—Ç—Ä–æ–∫–∞ 8 - –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ
# bind = f"0.0.0.0:{os.environ.get('PORT', '8000')}"

# –°—Ç—Ä–æ–∫–∞ 73 - callback –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bind
def on_starting(server):
    print(f"üöÄ Gunicorn –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ {bind}")  # ‚ùå bind –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Callback –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π `NameError: name 'bind' is not defined`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** Callback —Ç–µ–ø–µ—Ä—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –º—ã –∑–∞–ø—É—Å–∫–∞–µ–º –±–µ–∑ –∫–æ–Ω—Ñ–∏–≥-—Ñ–∞–π–ª–∞.

---

### ‚ùå –û—à–∏–±–∫–∞ #2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ daemon

**–§–∞–π–ª:** `gunicorn.conf.py`, —Å—Ç—Ä–æ–∫–∏ 54 –∏ 67

**–ë—ã–ª–æ:**
```python
# –°—Ç—Ä–æ–∫–∞ 54
daemon = False

# –°—Ç—Ä–æ–∫–∞ 67 
daemon = False  # ‚ùå –î—É–±–ª–∏–∫–∞—Ç!
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –£–±—Ä–∞–Ω –¥—É–±–ª–∏–∫–∞—Ç.

---

### ‚ùå –û—à–∏–±–∫–∞ #3: –ö–æ–Ω—Ñ–ª–∏–∫—Ç bind –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –í `gunicorn.conf.py` –±—ã–ª –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω `bind`
- –í `entrypoint.sh` –¥–æ–±–∞–≤–ª—è–ª—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `--bind`
- Gunicorn –ø—ã—Ç–∞–ª—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞, —á—Ç–æ –≤—ã–∑—ã–≤–∞–ª–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 
- –£–±—Ä–∞–Ω —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

---

## üõ† –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ Gunicorn –ë–ï–ó –∫–æ–Ω—Ñ–∏–≥-—Ñ–∞–π–ª–∞:

```bash
exec gunicorn \
    --bind 0.0.0.0:${PORT:-8000} \
    --workers 1 \
    --worker-class sync \
    --timeout 120 \
    --log-level info \
    --access-logfile - \
    --error-logfile - \
    --forwarded-allow-ips='*' \
    --proxy-allow-ips='*' \
    stimul_ico.wsgi:application
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –Ω–µ—Ç —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å—Å—è  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –Ω–µ—Ç callbacks, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —É–ø–∞—Å—Ç—å  
‚úÖ **–Ø–≤–Ω–æ—Å—Ç—å** - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∏–¥–Ω—ã –≤ entrypoint.sh  
‚úÖ **–û—Ç–ª–∞–¥–∫–∞** - –ª–µ–≥–∫–æ –∏–∑–º–µ–Ω–∏—Ç—å –ª—é–±–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä  

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. ‚úÖ Gunicorn –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ Worker –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –ü–æ—Ä—Ç 8080 –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å—Å—è –Ω–∞ `0.0.0.0`
4. ‚úÖ Railway —Å–º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É
5. ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è

---

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### 1. –õ–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑–∞—Ç—å:

```
üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º Gunicorn –Ω–∞ –ø–æ—Ä—Ç—É 8080...
üì° Gunicorn –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å: 0.0.0.0:8080
üîß –ë–ï–ó –∫–æ–Ω—Ñ–∏–≥-—Ñ–∞–π–ª–∞, —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
[INFO] Starting gunicorn 21.2.0
[INFO] Listening at: http://0.0.0.0:8080 (1)
[INFO] Booting worker with pid: 10
```

### 2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ endpoints:

```bash
curl https://stimulico-production.up.railway.app/ultra-simple/
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: OK - Ultra simple test!

curl https://stimulico-production.up.railway.app/health/
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º

curl https://stimulico-production.up.railway.app/
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å HTML –∏–ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ login
```

### 3. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ 502:

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Railway:
- –°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Networking)
- Public Networking –≤–∫–ª—é—á–µ–Ω?
- –ü–æ—Ä—Ç 8080 —É–∫–∞–∑–∞–Ω?
- TCP Proxy –≤–∫–ª—é—á–µ–Ω?

---

## üí° –ü–æ—á–µ–º—É —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

### –†–∞–Ω—å—à–µ:
```
Railway ‚Üí –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Üí Gunicorn (–ø–∞–¥–∞–µ—Ç –Ω–∞ callback) ‚Üí ‚ùå connection refused
```

### –¢–µ–ø–µ—Ä—å:
```
Railway ‚Üí –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Üí Gunicorn (–ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫) ‚Üí ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

---

## ‚è∞ –í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è

–î–µ–ø–ª–æ–π –∑–∞–π–º–µ—Ç **2-3 –º–∏–Ω—É—Ç—ã**.

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è **–°–†–ê–ó–£** –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
```
https://stimulico-production.up.railway.app/ultra-simple/
```

–ï—Å–ª–∏ –≤–µ—Ä–Ω–µ—Ç "OK" - **–ü–û–ë–ï–î–ê!** üéâ

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ 502 - –ø—Ä–æ–±–ª–µ–º–∞ –≤ Railway –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö, –Ω–µ –≤ –∫–æ–¥–µ.

